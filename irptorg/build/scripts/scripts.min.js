lazySizes.cfg.preloadAfterLoad=!0;const brakepoints={sm:576,md:768,lg:1024,xl:1280,xxl:1600},$body=document.body,$wrapper=document.querySelector(".wrapper"),$header=document.querySelector(".header"),TouchHoverEvents={targets:"a, button, label, tr, [data-touch-hover]",touched:!(window.onload=function(){TouchHoverEvents.init(),Validation.init(),Modal.init(),Nav.init();var e=document.querySelector(".docs-slider");e&&new DocsSlider(e).init(),$body.classList.add("loaded")}),touchEndDelay:100,init:function(){document.addEventListener("touchstart",e=>{this.events(e)}),document.addEventListener("touchend",e=>{this.events(e)}),document.addEventListener("mouseenter",e=>{this.events(e)},!0),document.addEventListener("mouseleave",e=>{this.events(e)},!0),document.addEventListener("mousedown",e=>{this.events(e)}),document.addEventListener("mouseup",e=>{this.events(e)}),document.addEventListener("contextmenu",e=>{this.events(e)})},events:function(e){let t=[];t[0]=e.target!==document?e.target.closest(this.targets):null;let s=t[0],a=0;for(;t[0]&&(s=s.parentNode,s!==document);)s.matches(this.targets)&&(a++,t[a]=s);if("touchstart"==e.type){if(this.touched=!0,this.timeout&&clearTimeout(this.timeout),t[0]){for(var o of document.querySelectorAll(this.targets))o.classList.remove("touch");for(var i of t)i.setAttribute("data-touch","")}}else("touchend"==e.type||"contextmenu"==e.type&&this.touched)&&(this.timeout=setTimeout(()=>{this.touched=!1},500),t[0]&&setTimeout(()=>{for(var e of t)e.dispatchEvent(new CustomEvent("customTouchend")),e.removeAttribute("data-touch")},this.touchEndDelay));"mouseenter"==e.type&&!this.touched&&t[0]&&t[0]==e.target?t[0].setAttribute("data-hover",""):"mouseleave"==e.type&&!this.touched&&t[0]&&t[0]==e.target&&(t[0].removeAttribute("data-focus"),t[0].removeAttribute("data-hover")),"mousedown"==e.type&&!this.touched&&t[0]?t[0].setAttribute("data-focus",""):"mouseup"==e.type&&!this.touched&&t[0]&&t[0].removeAttribute("data-focus")}};class DocsSlider{constructor(e){this.$parent=e}init(){this.$slider=this.$parent.querySelector(".swiper-container"),this.$prev=this.$parent.querySelector(".swiper-button-prev"),this.$next=this.$parent.querySelector(".swiper-button-next"),this.slider=new Swiper(this.$slider,{loop:!0,slidesPerView:1,spaceBetween:0,speed:300,navigation:{prevEl:this.$prev,nextEl:this.$next},lazy:{loadOnTransitionStart:!0,loadPrevNext:!0}})}}const Validation={init:function(){this.namspaces={name:"name",phone:"phone",email:"email",message:"message"},this.constraints={name:{presence:{allowEmpty:!1,message:"^Введите ваше имя"},format:{pattern:/[A-zА-яЁё ]+/,message:"^Введите корректное имя"},length:{minimum:2,tooShort:"^Имя слишком короткое (минимум %{count} символа)",maximum:20,tooLong:"^Имя слишком длинное (максимум %{count} символов)"}},phone:{presence:{allowEmpty:!1,message:"^Введите ваш номер телефона"},format:{pattern:/^\+7 \d{3}\ \d{3}\-\d{4}$/,message:"^Введите корректный номер телефона"}},email:{presence:{allowEmpty:!1,message:"^Введите ваш email"},email:{message:"^Неправильный формат email-адреса"}},message:{presence:{allowEmpty:!1,message:"^Введите ваше сообщение"},length:{minimum:2,tooShort:"^Сообщение слишком короткое (минимум %{count} символа)",maximum:100,tooLong:"^Сообщение слишком длинное (максимум %{count} символов)"}}},this.mask=Inputmask({mask:"+7 999 999-9999",showMaskOnHover:!1,clearIncomplete:!1}).mask("[data-validate='phone']"),gsap.registerEffect({name:"fadeMessages",effect:e=>gsap.timeline({paused:!0}).fromTo(e,{autoAlpha:0},{autoAlpha:1,duration:.3,ease:"power2.inOut"})}),document.addEventListener("submit",e=>{let s=e.target,a=s.querySelectorAll("[data-validate]"),o=s.querySelector("[data-consent-checkbox]").checked;if(a.length){e.preventDefault();let t=0;a.forEach(e=>{this.validInput(e)||t++}),!t&&o&&this.submitEvent(s)}}),document.addEventListener("input",e=>{let t=e.target,s=t.parentNode,a=t.closest("form"),o=a.querySelector("button");""==t.getAttribute("data-consent-checkbox")&&(t.checked?o.classList.remove("disabled"):o.classList.add("disabled")),s.classList.contains("error")&&this.validInput(t)})},validInput:function(e){let t=e.parentNode,s=e.getAttribute("data-validate"),a=null!==e.getAttribute("data-required"),o=e.value,i=void 0!==validate.single(o,{presence:{allowEmpty:!1}}),n;for(var r in this.namspaces)if(s==r&&(a||!i)){n=validate.single(o,this.constraints[r]);break}if(n)return t.classList.contains("error")?t.querySelector(".input__message").textContent=`${n[0]}`:(t.classList.add("error"),t.insertAdjacentHTML("beforeend",`<span class="input__message">${n[0]}</span>`),e=t.querySelector(".input__message"),gsap.effects.fadeMessages(e).play()),!1;if(t.classList.contains("error")){t.classList.remove("error");let e=t.querySelector(".input__message");gsap.effects.fadeMessages(e).reverse(1).eventCallback("onReverseComplete",()=>{e.remove()})}return!0},reset:function(e){let t=e.querySelectorAll("input, textarea");t.forEach(e=>{let t=e.parentNode;if(e.value="",t.classList.contains("error")){t.classList.remove("error");let e=t.querySelector(".input__message");gsap.effects.fadeMessages(e).reverse(1).eventCallback("onReverseComplete",()=>{e.remove()})}})},submitEvent:function(e){let t=e.querySelector("button"),s=e.querySelectorAll("input, textarea");s.forEach(e=>{e.parentNode.classList.add("loading")}),t.classList.add("loading");let a=()=>{s.forEach(e=>{e.parentNode.classList.remove("loading")}),t.classList.remove("loading"),this.reset(e),Modal.open(document.querySelector("#modal-succes")),setTimeout(()=>{Modal.close()},3e3)};$.ajax({type:"POST",url:$(e).attr("action"),data:$(e).serialize(),success:function(e){console.log(e),a()}})}},Modal={init:function(){gsap.registerEffect({name:"modal",effect:(e,t)=>{return gsap.timeline({paused:!0}).fromTo(e,{autoAlpha:0},{autoAlpha:1,duration:.5,ease:"power2.inOut"}).fromTo(t,{y:20},{y:0,duration:1,ease:"power2.out"},"-=0.5")},extendTimeline:!0}),document.addEventListener("click",e=>{let t=e.target.closest('[data-modal="open"]'),s=e.target.closest('[data-modal="close"]'),a=e.target.closest(".modal"),o=e.target.closest(".modal-block");t?(e.preventDefault(),e=document.querySelector(`${t.getAttribute("href")}`),this.open(e)):(s||!o&&a)&&this.close()})},open:function(t){var e=()=>{this.$active=t,scrollLock.disablePageScroll();var e=t.querySelector(".modal-block");this.animation=gsap.effects.modal(t,e),this.animation.play()};t&&(this.$active?this.close(e):e())},close:function(e){this.$active&&(this.animation.timeScale(2).reverse().eventCallback("onReverseComplete",()=>{delete this.animation,scrollLock.enablePageScroll(),e&&e()}),delete this.$active)}},Scroll={scroll:function(e,t){let s={y:window.pageYOffset};0<t?(this.animation=gsap.to(s,{y:e,duration:t,ease:"power2.inOut",onComplete:()=>{this.inScroll=!1,cancelAnimationFrame(this.frame)}}),this.checkScroll=()=>{window.scrollTo(0,s.y),this.frame=requestAnimationFrame(()=>{this.checkScroll()})},this.checkScroll()):window.scrollTo(0,e)}},Nav={init:function(){this.$element=document.querySelector(".mobile-nav"),this.$items=document.querySelectorAll(".mobile-nav__item"),this.$toggle=document.querySelector(".nav-toggle-button"),this.animation=gsap.timeline({paused:!0}).fromTo(this.$element,{autoAlpha:0},{autoAlpha:1,duration:.5,ease:"power2.inOut"}).fromTo(this.$items,{autoAlpha:0,y:30},{autoAlpha:1,y:0,ease:"power2.out",duration:.4,stagger:{amount:.1}},"-=0.5"),this.open=()=>{this.$toggle.classList.add("active"),this.animation.play(),Scroll.scroll(0,.5),scrollLock.disablePageScroll()},this.close=()=>{this.$toggle.classList.remove("active"),this.animation.reverse(),scrollLock.enablePageScroll()},this.change=()=>{this.state?(this.state=!1,this.open()):(this.state=!0,this.close())},this.change(),this.$toggle.addEventListener("click",()=>{this.change()})}};