const brakepoints={sm:576,md:768,lg:1024,xl:1200,xxl:1600},$body=document.body,$wrapper=document.querySelector(".wrapper"),$header=document.querySelector(".header");function value_format(e,t=0,i=" ",a=" "){var s,n=parseInt(e=(+e||0).toFixed(t))+"";return 3<(s=n.length)?s%=3:s=0,(s?n.substr(0,s)+a:"")+n.substr(s).replace(/(\d{3})(?=\d)/g,"$1"+a)+(t?i+Math.abs(e-n).toFixed(t).replace(/-/,0).slice(2):"")}document.addEventListener("DOMContentLoaded",function(e){TouchHoverEvents.init(),Header.init(),lazySizes.init(),FormElements.init(),Dropdown.init(),Tabs.init(),Modal.init(),Mask.init(),jsRange(),header_search(),filter_mobile(),calculator();var t=document.querySelector(".product__images");t&&new ProductImages(t).init()});const TouchHoverEvents={targets:"a, button, label, tr, .ss-option, .jsTouchHover",touched:!1,touchEndDelay:100,init:function(){document.addEventListener("touchstart",e=>{this.events(e)}),document.addEventListener("touchend",e=>{this.events(e)}),document.addEventListener("mouseenter",e=>{this.events(e)},!0),document.addEventListener("mouseleave",e=>{this.events(e)},!0),document.addEventListener("mousedown",e=>{this.events(e)}),document.addEventListener("mouseup",e=>{this.events(e)}),document.addEventListener("contextmenu",e=>{this.events(e)})},events:function(e){let t=[];t[0]=e.target!==document?e.target.closest(this.targets):null;let i=t[0],a=0;for(;t[0]&&(i=i.parentNode,i!==document);)i.matches(this.targets)&&(a++,t[a]=i);if("touchstart"==e.type){if(this.touched=!0,this.timeout&&clearTimeout(this.timeout),t[0]){for(var s of document.querySelectorAll(this.targets))s.classList.remove("touch");for(var n of t)n.setAttribute("data-touch","")}}else("touchend"==e.type||"contextmenu"==e.type&&this.touched)&&(this.timeout=setTimeout(()=>{this.touched=!1},500),t[0]&&setTimeout(()=>{for(var e of t)e.dispatchEvent(new CustomEvent("customTouchend")),e.removeAttribute("data-touch")},this.touchEndDelay));"mouseenter"==e.type&&!this.touched&&t[0]&&t[0]==e.target?t[0].setAttribute("data-hover",""):"mouseleave"==e.type&&!this.touched&&t[0]&&t[0]==e.target&&(t[0].removeAttribute("data-focus"),t[0].removeAttribute("data-hover")),"mousedown"==e.type&&!this.touched&&t[0]?t[0].setAttribute("data-focus",""):"mouseup"==e.type&&!this.touched&&t[0]&&t[0].removeAttribute("data-focus")}},Header={init:function(){let s=0,n,o,c;this.checkSize=()=>{o=$header.getBoundingClientRect().height,c=$wrapper.getBoundingClientRect().top+window.pageYOffset+$header.getBoundingClientRect().height},this.check=()=>{var e=window.pageYOffset,t=window.innerHeight,i=$header.classList.contains("header_fixed"),a=$header.classList.contains("header_hidden");e>c&&!i?($header.classList.add("header_fixed"),$wrapper.style.paddingTop=`${o}px`):e<=c&&i&&($header.classList.remove("header_fixed"),$wrapper.style.paddingTop="0px"),s<e?t<(n=e)&&!a&&$header.classList.add("header_hidden"):s>e&&a&&(e<t||e+100<n)&&$header.classList.remove("header_hidden"),s=e},this.check(),window.addEventListener("scroll",()=>{this.check()})}},FormElements={init:function(){let e=document.querySelectorAll(".select");e.forEach((e,t)=>{e=new SlimSelect({select:e,showContent:"down",showSearch:!1})})}},Dropdown={init:function(){$('[data-action="dropdown-toggle"]').on("click",function(){let e=$(this),t="is-active",i=e.parents('[data-action="dropdown"]'),a=i.find('[data-action="dropdown-content"]'),s=i.siblings(),n=s.find('[data-action="dropdown-toggle"]'),o=s.find('[data-action="dropdown-content"]');n.removeClass(t),o.removeClass(t),a.toggleClass(t),e.toggleClass(t)})}},Mask={init:function(){var e=document.querySelectorAll("[data-phone]");e.length&&Inputmask({mask:"+7 999 999-9999",showMaskOnHover:!1,clearIncomplete:!1}).mask(e)}},Tabs={init:function(){let e=$('[data-action="tabs"]');e.each(function(){let e=$(this),t=e.find('[data-action="tabs-trigger"]'),i=e.find('[data-action="tabs-content"]'),a=e=>{t.removeClass("is-active").eq(e).addClass("is-active"),i.hide().eq(e).fadeIn(150)};a(0),t.on("click",function(){var e=t.index($(this));a(e)})})}},Modal={init:function(){this.$modals=document.querySelectorAll(".modal"),document.addEventListener("click",e=>{let t=e.target.closest('[data-modal="open"]'),i=e.target.closest('[data-modal="close"]');e.target.closest(".modal"),e.target.closest(".modal-block");t?(e.preventDefault(),e=document.querySelector(`${t.getAttribute("href")}`),this.open(e)):i&&this.close()})},open:function(e){var t;e&&(t=()=>{this.$active=e,scrollLock.disablePageScroll(),e.classList.add("active")},this.$active?this.close(t):t())},close:function(e){this.$active&&(this.$active.classList.remove("active"),setTimeout(()=>{delete this.$active,scrollLock.enablePageScroll(),e&&e()},500))}};class ProductImages{constructor(e){this.$slider=e}init(){this.index=0,this.$mimages=this.$slider.querySelectorAll(".product__main-images .image"),this.$nimages=this.$slider.querySelectorAll(".product__nav-images .image"),this.slide=e=>{this.flag?this.flag=!0:(this.$mimages[this.index].style.zIndex="1",this.$mimages[this.index].classList.remove("is-visible"),this.$nimages[this.index].classList.remove("is-active")),this.$mimages[e].style.zIndex="2",this.$mimages[e].classList.add("is-visible"),this.$nimages[e].classList.add("is-active"),this.index=e},this.slide(this.index),this.events=[],this.$nimages.forEach((e,t)=>{this.events[t]=e=>{"click"==e||"mouseenter"==e&&TouchHoverEvents.touched,this.slide(t)},e.addEventListener("mouseenter",this.events[t]),e.addEventListener("click",this.events[t])})}}function jsRange(){let e=$(".filter-range");e.each(function(){let e=$(this),t=e.find(".filter-range__input-from"),i=e.find(".filter-range__input-to"),a=e.find(".filter-range__range input"),s,n=+a.attr("data-min"),o=+a.attr("data-max"),c=+t.val()||n,d=+i.val()||o,l=+a.attr("data-step")||1;function r(e){c=e.from,d=e.to,t.length&&t.val(value_format(c)),i.length&&i.val(value_format(d))}a.ionRangeSlider({skin:"round",type:"double",min:n,max:o,from:c,to:d,step:l,onStart:r,onChange:r,onFinish:r}),s=a.data("ionRangeSlider"),t.add(i).on("input",function(){var e=+$(this).val().replace(/\s/g,"");$(this).val(value_format(e))}),t.on("change",function(){let e=+$(this).val().replace(/\s/g,"");e<n?e=n:e>d&&(e=d),s.update({from:e}),t.val(value_format(e))}),i.on("change",function(){let e=+$(this).val().replace(/\s/g,"");e<c?e=c:e>o&&(e=o),s.update({to:e}),i.val(value_format(e))})})}function calculator(){let e=$(".js-calc");e.each(function(){let e=$(this),t=e.find(".js-calc__plus"),i=e.find(".js-calc__minus"),a=e.find(".js-calc__input"),s=+a.val();function n(){a.val(s),1==s?i.addClass("disabled"):i.removeClass("disabled")}n(),t.on("click",function(){s++,n()}),i.on("click",function(){1<s&&s--,n()}),a.on("change input",function(){s=+a.val().replace(/\s/g,""),s<1&&(s=1),n()})})}function header_search(){let i=$(".header__search");if(i.length){let e=$(".header__search-open"),t=$(".header__search-close");e.on("click",function(){i.addClass("is-active"),$($header).addClass("header_search-active")}),t.on("click",function(){i.removeClass("is-active"),$($header).removeClass("header_search-active")})}}function filter_mobile(){let e=$(".catalogue-filter"),t=$(".catalogue-filter-open"),i=$(".catalogue-filter__bg, .catalogue-filter__close");i.on("click",function(){e.removeClass("is-active"),scrollLock.enablePageScroll()}),t.on("click",function(){e.addClass("is-active"),scrollLock.disablePageScroll()})}