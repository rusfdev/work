{"version":3,"sources":["common.js"],"names":["$","document","ready","lazy","nav","slider","window","resize","windowW","Math","max","innerWidth","documentElement","clientWidth","pageW","min","imagesResize","this","scrollbarW","$slider","$overlay","$nav","$navOpen","addClass","fadeIn","$navClose","on","removeClass","fadeOut","imageBase","defaultImage","afterLoad","element","box","height","setTimeout","boxH","boxW","width","imgH","each","slideCount","slideCount576","slideCount1200","slideCount1024","slideCount768","slideCount420","dots","adaptiveHeight","hasClass","arrows","infinite","speed","centerMode","slidesToShow","slidesToScroll","prevArrow","nextArrow","parents","find","responsive","breakpoint","settings","fancybox","btnTpl","arrowRight","defaults","slideShow","i18n","arrowLeft","PREV","PLAY_STOP","zoom","DOWNLOAD","download","animationEffect","$selector","backFocus","ru","CLOSE","index","NEXT","ERROR","PLAY_START","THUMBS","target","event","preventDefault","SHARE","$dropdown","toggleClass","console","loop","autoFocus","open","selector","dropdown","length","log"],"mappings":"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","file":"../common.min.js","sourcesContent":["$(document).ready(function () {\n  lazy();\n  nav();\n  slider();\n  funcybox();\n  dropdown()\n});\n\n$(window).resize(function () {\n\n  windowW = Math.max(window.innerWidth, document.documentElement.clientWidth);\n  pageW = Math.min(window.innerWidth, document.documentElement.clientWidth);\n\n  $('img').each(function() {\n    imagesResize($(this));\n  });\n});\n\n//global variables\nlet windowW = Math.max(window.innerWidth, document.documentElement.clientWidth),\n    pageW = Math.min(window.innerWidth, document.documentElement.clientWidth),\n    scrollbarW = windowW - pageW,\n    $slider = $('.slider');\n\n//nav\nfunction nav() {\n  let $navOpen = $('.nav-open-btn'),\n    $navClose = $('.nav-close-btn'),\n    $overlay = $('.overlay'),\n    $nav = $('.nav');\n\n  $navOpen.on('click', function() {\n    $nav.addClass('active');\n    $overlay.fadeIn(300);\n  })\n  $navClose.on('click', function() {\n    $nav.removeClass('active');\n    $overlay.fadeOut(300);\n  })\n  $overlay.on('click touchstart', function () {\n    $nav.removeClass('active');\n    $overlay.fadeOut(300);\n  })\n\n  $(window).resize(function () {\n    if (windowW > 1024) {\n      $nav.removeClass('active');\n      $overlay.fadeOut(300);\n    }\n  });\n}\nfunction lazy() {\n  $(\".lazy\").Lazy({\n    effectTime: 0,\n    threshold: 500,\n    imageBase: false,\n    defaultImage: false,\n    afterLoad: function(element) {\n      imagesResize(element);\n    }\n  });\n}\nfunction imagesResize(element) {\n  let box = element.parent();\n\n  if(!box.hasClass('cover-box_size-auto')) {\n    let boxH = box.height(),\n        boxW = box.width();\n\n    setTimeout(function() {\n      let imgH = element.height(),\n          imgW = element.width();\n\n      if ((boxW / boxH) >= (imgW / imgH)) {\n        element.addClass('ww').removeClass('wh');\n      } else {\n        element.addClass('wh').removeClass('ww');\n      }\n      element.addClass('visible');\n    }, 100)\n  } else {\n    element.addClass('visible');\n  }\n}\nfunction slider() {\n  $slider.on('init', function () {\n    $(this).addClass('visible')\n  });\n\n  $slider.each(function () {\n    $(this).on('init beforeChange afterChange', function(){\n      lazy();\n    });\n\n    let slideCount = 1,\n      slideCount1200 = 1,\n      slideCount1024 = 1,\n      slideCount768 = 1,\n      slideCount576 = 1,\n      slideCount420 = 1,\n      arrows = false,\n      dots = false,\n      centerMode = false,\n      adaptiveHeight = false;\n\n    if ($(this).hasClass('dots')) {\n      dots = true;\n    }\n    if ($(this).hasClass('arrows')) {\n      arrows = true;\n    }\n    if ($(this).hasClass('banner-slider')) {\n      adaptiveHeight = true;\n    }\n    if ($(this).hasClass('work-slider')) {\n      slideCount = 4;\n      slideCount1200 = 4;\n      slideCount1024 = 3;\n      slideCount768 = 2;\n      slideCount576 = 2;\n      slideCount420 = 1;\n    }\n\n    $(this).slick({\n      infinite: true,\n      dots: dots,\n      arrows: true,\n      speed: 600,\n      adaptiveHeight: adaptiveHeight,\n      centerMode: centerMode,\n      slidesToShow: slideCount,\n      slidesToScroll: slideCount,\n      prevArrow: $(this).parents('.section').find('.slider-prev'),\n      nextArrow: $(this).parents('.section').find('.slider-next'),\n      responsive: [{\n          breakpoint: 1200,\n          settings: {\n            slidesToShow: slideCount1200,\n            slidesToScroll: slideCount1200\n          }\n        },\n        {\n          breakpoint: 1024,\n          settings: {\n            slidesToShow: slideCount1024,\n            slidesToScroll: slideCount1024\n          }\n        },\n        {\n          breakpoint: 768,\n          settings: {\n            slidesToShow: slideCount768,\n            slidesToScroll: slideCount768\n          }\n        },\n        {\n          breakpoint: 576,\n          settings: {\n            slidesToShow: slideCount576,\n            slidesToScroll: slideCount576\n          }\n        },\n        {\n          breakpoint: 420,\n          settings: {\n            slidesToShow: slideCount420,\n            slidesToScroll: slideCount420\n          }\n        }\n      ]\n    });\n  });\n  //fix\n  $('.publications-slide').parent().css('display', 'flex');\n}\nfunction funcybox() {\n  $.fancybox.defaults.btnTpl.close = '<button data-fancybox-close class=\"fancybox-button fancybox-button--close\" title=\"{{CLOSE}}\">' +\n  '<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 13.6 13.6\"><path d=\"M6.8 5.4L1.4 0 0 1.4l5.4 5.4L0 12.2l1.4 1.4 5.4-5.4 5.4 5.4 1.4-1.4-5.4-5.4 5.4-5.4L12.2 0z\"></path></svg>' +\n  \"</button>\";\n  $.fancybox.defaults.btnTpl.arrowLeft = '<button data-fancybox-prev class=\"fancybox-button fancybox-button--arrow_left\" title=\"{{PREV}}\">' +\n  '<div><svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 14 10.14\"><path d=\"M6.28 8.77l-1.34 1.37L0 5.07 4.94 0l1.34 1.38L3.6 4.1H14v1.94H3.6z\"></path></svg></div>' +\n  \"</button>\";\n  $.fancybox.defaults.btnTpl.arrowRight = '<button data-fancybox-prev class=\"fancybox-button fancybox-button--arrow_right\" title=\"{{PREV}}\">' +\n  '<div><svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 14 10.14\"><path d=\"M10.4 6.04L7.72 8.76l1.34 1.38L14 5.07 9.06 0 7.72 1.38 10.4 4.1H0v1.94z\"></path></svg></div>' +\n  \"</button>\";\n  $.fancybox.defaults.btnTpl.zoom = '<button data-fancybox-zoom class=\"fancybox-button fancybox-button--zoom\" title=\"{{ZOOM}}\">' +\n  '<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 14.056 14.096\"> <path d=\"M13.756 12.356l-3-3a5.9 5.9 0 0 0-.6-7.6 5.9 5.9 0 0 0-8.4 0 5.9 5.9 0 0 0 0 8.4 5.9 5.9 0 0 0 7.7.7l3 3a1 1 0 0 0 1.3 0c.4-.5.4-1 0-1.5zm-10.6-3.5a4 4 0 0 1 0-5.7 4 4 0 0 1 5.7 0 4 4 0 0 1 0 5.7 4 4 0 0 1-5.7 0z\"></path> </svg>' +\n  \"</button>\";\n  $.fancybox.defaults.btnTpl.download = '<a download data-fancybox-download class=\"fancybox-button fancybox-button--download\" title=\"{{DOWNLOAD}}\" href=\"javascript:;\">' +\n  '<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 13.24 14\"> <path d=\"M13.24 12.09V14H0v-1.91zm-2.97-6.96l1.35 1.32-5 4.87-5-4.87 1.36-1.32 2.68 2.64V0h1.92v7.77z\"></path> </svg>' +\n  \"</a>\";\n  $.fancybox.defaults.btnTpl.slideShow = '<button data-fancybox-play class=\"fancybox-button fancybox-button--play\" title=\"{{PLAY_START}}\">' +\n  '<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 11 13.2\"> <path d=\"M0 0v13.2l11-6.6z\"></path></svg>' +\n  '<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 7.35 12.5\" id=\"slideshow\"><path d=\"M0 0h2.2v12.5H0zm5.15 0h2.2v12.5h-2.2z\"></path></svg>' +\n  \"</button>\";\n  $.fancybox.defaults.btnTpl.smallBtn = '<button type=\"button\" data-fancybox-close class=\"fancybox-button fancybox-close-small\" title=\"{{CLOSE}}\">' +\n  '<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 13.6 13.6\"><path d=\"M6.8 5.4L1.4 0 0 1.4l5.4 5.4L0 12.2l1.4 1.4 5.4-5.4 5.4 5.4 1.4-1.4-5.4-5.4 5.4-5.4L12.2 0z\"></path></svg>' +\n  \"</button>\";\n  $.fancybox.defaults.btnTpl.thumbs = '<button data-fancybox-thumbs class=\"fancybox-button fancybox-button--thumbs\" title=\"{{THUMBS}}\">' +\n  '<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 12.7 12.7\" id=\"slideshow\"><path d=\"M8.94 8.94h3.76v3.76H8.94zm-4.47 0h3.76v3.76H4.47zM0 8.94h3.76v3.76H0zm8.94-4.47h3.76v3.76H8.94zm-4.47 0h3.76v3.76H4.47zM0 4.47h3.76v3.76H0zM8.94 0h3.76v3.76H8.94zM4.47 0h3.76v3.76H4.47zM0 0h3.76v3.76H0z\"></path></svg>' +\n  \"</button>\";\n  $.fancybox.defaults.i18n.ru = {\n    CLOSE       : 'Закрыть',\n    NEXT        : 'Следующий слайд',\n    PREV        : 'Предидущий слайд',\n    ERROR       : 'Ошибка загрузки, попробуйте позже.',\n    PLAY_START  : 'Запустить слайд-шоу',\n    PLAY_STOP   : 'Остановить слайд-шоу',\n    FULL_SCREEN : 'Полноэкранный режим',\n    THUMBS      : 'Миниатюры',\n    DOWNLOAD    : 'Загрузить',\n    SHARE       : 'Поделиться',\n    ZOOM        : 'Увеличить'\n  };\n  $.fancybox.defaults.lang = 'ru';\n  $.fancybox.defaults.loop = true;\n  $.fancybox.defaults.autoFocus = false;\n  $.fancybox.defaults.animationEffect = 'fade'\n  $.fancybox.defaults.backFocus = 'false'\n\n  $('.slide [data-fancybox]').on('click', function() {\n    let $selector = $(this).parents('.slider').find('.slick-slide:not(.slick-cloned) a');\n\n    $.fancybox.open( $selector, {\n        selector : $selector,\n        backFocus : false\n    }, $selector.index( this ) );\n\n    return false;\n  });\n}\n\nfunction dropdown() {\n  $(document).on('click', function(event) {\n    if($(event.target).hasClass('dropdown__toggle')) {\n      event.preventDefault();\n      let $dropdown = $(event.target).parents('.dropdown');\n      $dropdown.toggleClass('active');\n    } else if($(event.target).parents('.dropdown').length==0 && !$(event.target).hasClass('dropdown')) {\n      $('.dropdown').removeClass('active');\n      console.log('+')\n    }\n  })\n}"]}