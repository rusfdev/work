{"version":3,"sources":["common.js"],"names":["$","document","ready","slider","timerMain","navigation","modalMagnificBasket","landingScroll","moreinfo","mask","on","pw","width","window","$body","nav","$block","$link","$overlay","$scrollLink","$fixedEls","lazy","Lazy","visibleOnly","threshold","effect","effectTime","resizeEvents","stateToggle","hasClass","$toggle","hide","addClass","scrollLock","fadeOut","show","removeClass","event","date","Date","year","getFullYear","month","getMonth","day","each","daysLeft","this","$this","finalDate","html","strftime","$slider","pag","setTimeout","parents","find","eq","index","$slides","after","siblings","slidesToShow","slick","arrows","slidesToScroll","children","click","removalDelay","mainClass","open","windowW","closeBtnInside","showCloseBtn","callbacks","disableOn","innerWidth","css","x","magnificPopup","type","preloader","headerH","height","id","attr","top","offset","$button","animate","scrollTop","toggleClass","slideToggle","text"],"mappings":"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","file":"../common.min.js","sourcesContent":["$(document).ready(function () {\r\n  slider();\r\n  timerMain();\r\n  navigation();\r\n  modalMagnificBasket();\r\n  landingScroll();\r\n  moreinfo();\r\n  resizeEvents();\r\n  $(\".phone\").mask(\"9 (999) 99-9999\");\r\n});\r\n$(window).on('resize', function() {\r\n  pw = $('body').width();\r\n  resizeEvents();\r\n});\r\n\r\n//global\r\nconst $body = $('body');\r\nlet pw = $('body').width(),\r\n  nav = {\r\n    $block: $('.mobile-nav'),\r\n    $link: $('.mobile-nav__link'),\r\n    $toggle: $('.nav-toggle')\r\n  },\r\n  $overlay = $('.overlay'),\r\n  $scrollLink = $('.scroll-link'),\r\n  $fixedEls = $('.fixed-el');\r\n\r\n//lazy\r\nfunction lazy() {\r\n  $(\".lazy\").Lazy({\r\n    visibleOnly: true,\r\n    threshold: '',\r\n    effect: 'fadeIn',\r\n    effectTime: '500'\r\n  });\r\n}\r\n//resize events\r\nfunction resizeEvents() {\r\n  $fixedEls.css('max-width', pw);\r\n}\r\n//mobile nav\r\nfunction navigation() {\r\n  nav.$toggle.on('click', function(event) {\r\n    event.preventDefault();\r\n    nav.$block.toggleClass('active');\r\n    stateToggle();\r\n  })\r\n\r\n  function stateToggle() {\r\n    if(nav.$block.hasClass('active')) {\r\n      nav.$toggle.addClass('active');\r\n      $overlay.fadeIn();\r\n      scrollLock.hide($body);\r\n    } else {\r\n      nav.$toggle.removeClass('active');\r\n      $overlay.fadeOut();\r\n      scrollLock.show($body);\r\n    }\r\n  }\r\n  $(window).on('resize', function() {\r\n    if(pw>768) {\r\n      nav.$block.removeClass('active');\r\n      stateToggle();\r\n    }\r\n  });\r\n}\r\n//timer\r\nfunction timerMain() {\r\n  let date = new Date(),\r\n      year = date.getFullYear(),\r\n      month = date.getMonth()+1,\r\n      day = date.getDate(),\r\n      daysLeft = 2,\r\n      finalDate = `${year}/${month}/${day+daysLeft}`;\r\n\r\n  $('[data-countdown]').each(function() {\r\n    let $this = $(this);\r\n    $this.countdown(finalDate, function(event) {\r\n      $this.html(event.strftime(''\r\n      + '<div><span>%D</span> Дней</div>'\r\n      + '<div><span>%H</span> Часов</div>'\r\n      + '<div><span>%M</span> Минут</div>'\r\n      + '<div><span>%S</span> Секунд</div>'));\r\n    });\r\n  });\r\n}\r\n//gallery-slider\r\nfunction slider() {\r\n  let $slider = $('.catalogue-block__slider');\r\n\r\n  $slider.on('init', function(){\r\n    lazy();\r\n  });\r\n\r\n  $slider.each( function() {\r\n    $(this).after('<div class=\"catalogue-block__nav-slider\"></div>');\r\n\r\n    let $slides = $(this).html(),\r\n        $nav = $(this).siblings('.catalogue-block__nav-slider');\r\n\r\n    $nav.append($slides)\r\n    \r\n    $(this).slick({\r\n      arrows: true,\r\n      slidesToScroll: 1,\r\n      slidesToShow: 1,\r\n      dots: true\r\n    });\r\n  });\r\n  pag();\r\n\r\n  $slider.on('swipe', function(){\r\n    pag();\r\n  });\r\n\r\n  $('.catalogue-block__nav-slider .catalogue-block__slide').children().click(function() {\r\n    let index = $(this).parent().index();\r\n    $(this).parents('.catalogue-block').find('.catalogue-block__slider').slick('slickGoTo', index);\r\n    pag();\r\n  });\r\n\r\n  //custom pagination\r\n  function pag() {\r\n    $(\".slick-dots li\").each(function() {\r\n      if($(this).hasClass(\"slick-active\")) {\r\n        $(this).parents('.catalogue-block').find('.catalogue-block__nav-slider .catalogue-block__slide').removeClass(\"catalogue-block__slide_active\");\r\n        $(this).parents('.catalogue-block').find('.catalogue-block__nav-slider .catalogue-block__slide').eq($(this).index()).addClass(\"catalogue-block__slide_active\");\r\n      }\r\n    });\r\n  }\r\n\r\n  $(\".catalogue-block .slick-arrow\").on('click', function(){\r\n    setTimeout(function(){\r\n      pag();\r\n    }, 100);\r\n  });\r\n\r\n  //догрузка изображений при перелистывании\r\n  $('.catalogue-block__slider').on('afterChange', function(){\r\n    lazy();\r\n  });\r\n}\r\nfunction modalMagnificBasket() {\r\n\t$('.popup-link').magnificPopup({\r\n\t\tcloseBtnInside: false,\r\n    fixedContentPos: true,\r\n    removalDelay: 300,\r\n    mainClass: 'mfp-fade',\r\n    showCloseBtn: true,\r\n    callbacks: {\r\n      open: function() {\r\n        let windowW = $('.mfp-container').width() + 30,\r\n        x = window.innerWidth-windowW;\r\n        $('.mfp-close').css('right', x)\r\n      }\r\n    }\r\n  });\r\n\r\n  $('.popup-youtube').magnificPopup({\r\n    disableOn: 576,\r\n    type: 'iframe',\r\n    mainClass: 'mfp-fade',\r\n    removalDelay: 300,\r\n    preloader: false,\r\n    fixedContentPos: true,\r\n    closeBtnInside: false,\r\n    showCloseBtn: true\r\n  });\r\n}\r\n//якорные ссылки\r\nfunction landingScroll() {\r\n  let headerH = $(\".header\").height();\r\n\r\n  $scrollLink.on('click', function(event) {\r\n    let id  = $(this).attr('href'),\r\n        top = $(id).offset().top - headerH + 1;\r\n    event.preventDefault();\r\n    $('body,html').animate({scrollTop: top}, 400);\r\n  })\r\n}\r\n\r\n//more {\r\nfunction moreinfo() {\r\n  let $button = $('.catalogue-block-more__btn');\r\n\r\n  $button.on('click', function() {\r\n    $(this).toggleClass('catalogue-block-more__btn_active')\r\n    $(this).siblings('.catalogue-block-more__dropdown').slideToggle(300);\r\n    if($(this).hasClass('catalogue-block-more__btn_active')) {\r\n      $(this).text('Нажмите, чтобы cкрыть полное описание');\r\n    } else {\r\n      $(this).text('Нажмите, чтобы открыть полное описание');\r\n    }\r\n  })\r\n\r\n}"]}