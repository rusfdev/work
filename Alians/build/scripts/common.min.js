"use strict";function _createForOfIteratorHelper(e,t){var o;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(o=_unsupportedIterableToArray(e))||t&&e&&"number"==typeof e.length){o&&(e=o);var n=0,t=function(){};return{s:t,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,a=!0,i=!1;return{s:function(){o=e[Symbol.iterator]()},n:function(){var e=o.next();return a=e.done,e},e:function(e){i=!0,s=e},f:function(){try{a||null==o.return||o.return()}finally{if(i)throw s}}}}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var o=Object.prototype.toString.call(e).slice(8,-1);return"Object"===o&&e.constructor&&(o=e.constructor.name),"Map"===o||"Set"===o?Array.from(e):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var o=0,n=new Array(t);o<t;o++)n[o]=e[o];return n}lazySizes.cfg.init=!1;var brakepoints={sm:576,md:768,lg:1024,xl:1200};$(document).ready(function(){TouchHoverEvents.init(),Nav.init(),Slider.init(),select.init(),popup.init(),lazy(),toggle(),validation()});var TouchHoverEvents={targets:"a[class], button, label, tr, .jsTouchHover",touched:!1,touchEndDelay:100,init:function(){var t=this;document.addEventListener("touchstart",function(e){t.events(e)}),document.addEventListener("touchend",function(e){t.events(e)}),document.addEventListener("mouseenter",function(e){t.events(e)},!0),document.addEventListener("mouseleave",function(e){t.events(e)},!0),document.addEventListener("mousedown",function(e){t.events(e)}),document.addEventListener("mouseup",function(e){t.events(e)}),document.addEventListener("contextmenu",function(e){t.events(e)})},events:function(e){var t=this,o=[];o[0]=e.target!==document?e.target.closest(this.targets):null;for(var n=o[0],s=0;o[0]&&(n=n.parentNode)!==document;)n.matches(this.targets)&&(o[++s]=n);if("touchstart"==e.type){if(this.touched=!0,this.timeout&&clearTimeout(this.timeout),o[0]){var a,i=_createForOfIteratorHelper(document.querySelectorAll(this.targets));try{for(i.s();!(a=i.n()).done;){a.value.classList.remove("touch")}}catch(e){i.e(e)}finally{i.f()}var r,c=_createForOfIteratorHelper(o);try{for(c.s();!(r=c.n()).done;){r.value.classList.add("touch")}}catch(e){c.e(e)}finally{c.f()}}}else("touchend"==e.type||"contextmenu"==e.type&&this.touched)&&(this.timeout=setTimeout(function(){t.touched=!1},500),o[0]&&setTimeout(function(){var t=_createForOfIteratorHelper(o);try{for(t.s();!(e=t.n()).done;){var e=e.value;e.dispatchEvent(new CustomEvent("customTouchend")),e.classList.remove("touch")}}catch(e){t.e(e)}finally{t.f()}},this.touchEndDelay));"mouseenter"==e.type&&!this.touched&&o[0]&&o[0]==e.target?o[0].classList.add("hover"):"mouseleave"==e.type&&!this.touched&&o[0]&&o[0]==e.target&&o[0].classList.remove("hover","focus"),"mousedown"==e.type&&!this.touched&&o[0]?o[0].classList.add("focus"):"mouseup"==e.type&&!this.touched&&o[0]&&o[0].classList.remove("focus")}};function lazy(){document.addEventListener("lazybeforeunveil",function(e){var t=e.target.tagName;e.target.getAttribute("data-src");"IMG"!==t&&(t=e.target.getAttribute("data-src"),e.target.style.backgroundImage="url('".concat(t,"')"))}),lazySizes.init()}var select={init:function(){this.items=$("select"),this.items.length&&this.items.selectric({disableOnMobile:!1,nativeOnMobile:!1,arrowButtonMarkup:'<svg class="icon" viewBox="0 0 12 7" xmlns="http://www.w3.org/2000/svg"><path d="M9.72606 -1.19209e-07L11.1403 1.41421L5.57036 6.98453L4.15614 5.57031L9.72606 -1.19209e-07Z"/><path d="M0 1.41421L1.41421 1.19209e-07L6.98434 5.57047L5.57036 6.98453L0 1.41421Z"/></svg>'})}};function toggle(){var e=$(".toggle-section");e.each(function(){var e,o,t=$(this),n=t.children(".toggle-section__trigger"),s=t.children(".toggle-section__content"),a=!!t.hasClass("active");function i(){a?(t.add(s).add(n).addClass("active"),t.is("[data-slide]")&&s.slideDown(250)):(t.add(n).add(s).removeClass("active"),t.is("[data-slide]")&&(e?s.stop().slideUp(250):s.hide(0)))}n.on("click",function(){a=!a,i()}),t.is("[data-hover]")&&(n.add(s).on("mouseenter",function(e){TouchHoverEvents.touched||(o&&clearTimeout(o),a=!0,i())}),n.add(s).on("mouseleave",function(e){var t;TouchHoverEvents.touched||(t=$(this).is(n)?500:100,o=setTimeout(function(){a=!1,i()},t))})),(t.is("[data-out-hide]")||t.is("[data-hover]"))&&$(document).on("click touchstart",function(e){e=$(e.target);e.closest(s).length||e.closest(n).length||!a||(a=!1,i())}),i(),e=!0})}var Nav={init:function(){var t=this;this.$nav=$(".mobile-nav"),this.$toggle=$(".nav-toggle"),this.$toggle.on("click",function(e){e.preventDefault(),t.flag?t.close():t.open()}),$(document).on("click touchstart",function(e){0==$(e.target).closest(".mobile-nav__container").length&&0==$(e.target).closest(".header").length&&0==$(e.target).closest(t.$toggle).length&&1==t.flag&&t.close()})},open:function(){this.flag=!0,scrollLock.disablePageScroll(),$("header").addClass("header_nav-active"),this.$nav.addClass("active"),this.$toggle.addClass("active")},close:function(){this.flag=!1,scrollLock.enablePageScroll(),$("header").removeClass("header_nav-active"),this.$nav.removeClass("active"),this.$toggle.removeClass("active")}},Slider={arrow:'<svg fill="currentColor" class="icon" viewBox="0 0 32 22" id="arrow"><path d="M32 11c0-.3-.1-.5-.3-.7L21.8.3c-.4-.4-1-.4-1.4 0-.4.4-.4 1 0 1.4l8.2 8.3H1c-.6 0-1 .5-1 1s.4 1 1 1h27.6l-8.2 8.3c-.4.4-.4 1 0 1.4.4.4 1 .4 1.4 0l9.9-10c.2-.2.3-.4.3-.7z" fill-rule="evenodd" clip-rule="evenodd"></path></svg>',init:function(){this.el=$(".slider"),this.el.each(function(){var e=1,t=1,o=1,n=1,s=1,a=!1,i=!1,r=!1,c=!1,l='<button type="button" class="slider__next">'.concat(Slider.arrow,"</button>"),u='<button type="button" class="slider__prev">'.concat(Slider.arrow,"</button>");$(this).is(".slider_4n")&&(e=4,o=t=3,s=n=2,a=!0,$(this).slick({rows:0,infinite:!0,dots:i,arrows:a,nextArrow:l,prevArrow:u,speed:500,centerMode:r,slidesToShow:e,slidesToScroll:e,autoplay:c,autoplaySpeed:5e3,responsive:[{breakpoint:brakepoints.lg,settings:{slidesToShow:t,slidesToScroll:t}},{breakpoint:brakepoints.md,settings:{slidesToShow:o,slidesToScroll:o}},{breakpoint:brakepoints.sm,settings:{slidesToShow:n,slidesToScroll:n}},{breakpoint:brakepoints.xs,settings:{slidesToShow:s,slidesToScroll:s}}]}))})}};function validation(){var e=$(".js-validation"),c={phone:".input_phone",email:'[name="email"]',name:'[name="name"]',message:'[name="message"]',review:'[name="review"]'},l={phone:{format:{pattern:/^\+7 \d{3}\ \d{3}\-\d{4}$|()/,message:"^Некорректный номер телефона"},presence:{allowEmpty:!1,message:"^Введите номер телефона"}},email:{presence:{allowEmpty:!1,message:"^Введите ваш email"},email:{message:"^Неправильный формат"}},name:{presence:{allowEmpty:!1,message:"^Вы не указали ваше имя"},length:{minimum:2,tooShort:"^Имя слишком короткое",maximum:20,tooLong:"^Имя слишком длинное"}},message:{presence:{allowEmpty:!1,message:"^Введите ваше сообщение"},length:{minimum:10,tooShort:"^Сообщение слишком короткое",maximum:200,tooLong:"^Сообщение слишком длинное"}},review:{presence:{allowEmpty:!1,message:"^Напишите ваш отзыв"},length:{minimum:10,tooShort:"^Отзыв слишком короткий (минимум %{count} символов)",maximum:200,tooLong:"^Отзыв слишком длинный (максимум %{count} символов)"}}};Inputmask({mask:"+7 999 999-9999",showMaskOnHover:!1,clearIncomplete:!1}).mask(c.phone);e.each(function(){var e=$(this),r=e.find("input, textarea");function t(e){var o={},n={};r.each(function(){var e,t=$(this);for(e in c)t.is(c[e])&&$(this).is(".required")&&(o[e]=t.val(),n[e]=l[e])});var s=validate(o,n);if(void 0===s)return r.removeClass("error"),r.parent().find(".input__message").remove(),1;if(void 0!==e){var t,a=!0;for(t in s)e.is(c[t])&&e.is(".required")&&(a=!1);a&&(e.removeClass("error"),e.parent().find(".input__message").remove())}else{r.removeClass("error"),r.parent().find(".input__message").remove();for(var i in s)!function(t){r.each(function(){var e=$(this);e.is(c[t])&&(e.hasClass("required")||e.hasClass("filled"))&&(e.addClass("error"),e.parent().append('<span class="input__message">'.concat(s[t][0],"</span>")))})}(i)}}r.on("input",function(){t($(this))}),e.on("submit",function(e){e.preventDefault(),t()})})}window.popup={init:function(){this.$trigger=$("[data-popup-open]"),this.$close=$("[data-popup-close]"),this.$trigger.on("click",function(e){e.preventDefault();e=$($(this).attr("href"));e.length&&popup.open(e)}),$(document).on("click",function(e){var t=$(e.target);(t.closest(popup.$close).length||t.closest(".popup").length&&0==t.closest(".popup-block__container").length)&&(e.preventDefault(),t=t.closest(".popup").length?t.closest(".popup"):$(".city-question-popup"),popup.close(t))})},open:function(e){function t(){o.active=e,scrollLock.disablePageScroll(),e.addClass("active")}var o=this;this.active?popup.close(this.active,function(){t()}):t()},close:function(e,t){var o=this;scrollLock.enablePageScroll(),e.removeClass("active"),setTimeout(function(){o.active=void 0,"function"==typeof t&&t()},250)}};